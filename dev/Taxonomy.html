<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>

	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="Author" content="The Thing System" />
	<meta name="Keywords" content="Internet of Things, iot, home automation, Thing Sensor Report Protocol, TRSP, Simple Thing Protocol, Cloud, API, steward, curators, Rendezvous Server, Rendezvous Protocol, The Trouble With Things," />
	<meta name="Description" content="Welcome to The Thing System! Your life and your house went from one computer to an Internet of things. From tablets to lightbulbs, from sensors to media boxes, everybody gets their own Internet. Today, you have to fight your things. They don't talk to each other, the apps don't work, it's a tower of babel. Our solution is open source." />

	<title>&#x24E3; Philosophy</title>

	<link rel="stylesheet" href="../print.css" type="text/css" media="print" />
	<link rel="stylesheet" href="../master.css" type="text/css" media="screen" />

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-44378714-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body class="leaf">

<div class="header">
	<a href="../index.html" class="logo"><img alt="&#x24E3; the thing system" src="../images/thing.system.logo.svg" /></a>
</div>


<div class="main-content">
<ul class="nav">
	<li><a href="../dev/index.html" class="purple select-purple">For Implementors</a></li>
	<li style="clear: both;"><a href="Home.html" class="select-pink">Documentation</a>
		<ul class="subnav">
			<li><a href="The-Thing-Philosophy.html" class="select-toc">Philosophy</a> <span style="color: #f05687;">&rarr;</span>
				<ol class="toc-nav">
					<li><a href="Magic.html" class="toc">Magic</a></li>
				</ol>			
			</li>
			<li><a href="The-Thing-Architecture.html" class="toc">The Thing Architecture</a></li>
			<li><a href="Installation.html" class="toc">Installation</a></li>		
			<li><a href="Developer.html" class="toc">Developer</a></li>			
		</ul>	
	</li>
	<li style="clear: both;"><a href="supported-things.html" class="select-green">Supported Things</a></li>
	<li style="clear: both;"><a href="../code/index.html" class="select-orange">Get The Code</a></li>
	<li><a href="../index.html" class="green">&uarr;</a></li>
</ul>

<div class="doc-content">
<h1>Taxonomy</h1>
<p>The steward's taxonomy consists of a hierarchical system for device prototypes along with a flat namespace for properties.
Although the naming for device prototypes is hierarchical, based on primary function, a given property may appear in any device prototype in which "it makes sense".</p>

<p>Properties are expressed in a consistent set of units:</p>

<ul>
<li><em>percentage</em>    - [0 .. 100]</li>
<li><em>degrees</em>       - [0 .. 360)</li>
<li><em>mireds</em>        - [154 .. 500] (MK^-1, reciprocal mega-kelvins)</li>
<li><em>meters/second</em> - [0 .. N]</li>
<li><em>coordinates</em>   - [latitude, longitude] -or- [latitude, longitude, elevation] -or- [latitude, longitude, elevation, accuracy]</li>
<li><em>meters</em>        - [0 .. N]</li>
<li><em>kilometers</em>    - [0 .. N]</li>
<li><em>milliseconds</em>  - [0 .. N]</li>
<li><em>id</em>            - [1 .. N]</li>
<li><em>u8</em>            - [0 .. 255]</li>
<li><em>s8</em>            - [-127 .. 128]</li>
<li><em>fraction</em>      - [0 .. 1]</li>
<li><em>timestamp</em>     - 2013-03-28T15:52:49.680Z</li>
<li><em>celsius</em></li>
<li><em>ppm</em></li>
<li><em>decibels</em></li>
<li><em>millibars</em></li>
<li><em>sigmas</em></li>
</ul>

<p>or as an entry from a fixed set of keywords.</p>

<p>At a minimum,
three properties must be present in all devices:</p>

<ul>
<li><p><em>name</em> - a string</p></li>
<li><p><em>status</em> - a keyword:</p>

<ul>
<li><p><em>waiting</em> - indicates that the steward is waiting for the device to communicate</p></li>
<li><p><em>busy</em> - indicates that the device is busy "doing something"</p></li>
<li><p><em>ready</em> - indicates that all is well between the steward and the device</p></li>
<li><p><em>error</em> - indicates something else</p></li>
<li><p><em>reset</em> - indicates that the device, sadly, requires intervention</p></li>
<li><p><em>on</em> or <em>off</em> - for lighting and switches</p></li>
<li><p><em>motion</em> or <em>quiet</em> - for motion sensors</p></li>
<li><p><em>idle</em>, <em>playing</em>, or <em>paused</em> - for media players</p></li>
<li><p><em>present</em>, <em>absent</em>, or <em>recent</em> - for presence and sensors</p></li>
<li><p><em>green</em>, <em>blue</em>, <em>orange</em>, or <em>red</em> - for reporting steward health</p></li>
</ul></li>
<li><p><em>updated</em> - a <em>timestamp</em></p></li>
</ul>

<p>In addition, there are a few optional properties that might be supported by any device:</p>

<ul>
<li><p><em>location</em> - a <em>coordinates</em> array</p></li>
<li><p><em>placement</em> - a string (e.g., "front yard")</p></li>
<li><p><em>batteryLevel</em> - a <em>percentage</em></p></li>
<li><p><em>lqi</em> - an <em>s8</em> value indicating proximity (higher is closer)</p></li>
<li><p><em>nextSample</em> - a timestamp</p></li>
<li><p><em>text</em> - a string</p></li>
</ul>

<h4>Measurement Properties</h4>

<p>Certain properties are termed <em>measurement properties</em> in that model a physical characteristic that:</p>

<ul>
<li><p>is measured in a particular set of units (e.g., 'celsius');</p></li>
<li><p>that may be related to the <a href="http://en.wikipedia.org/wiki/International_System_of_Units">SI</a> system; and,</p></li>
<li><p>and often expressed using a symbol (e.g., 'C').</p></li>
</ul>

<p>If you wish for a measurement property to be automatically archived,
then examine the file</p>

<pre><code>steward/devices/device-sensor.js
</code></pre>

<p>to see which measurement properties are currently defined in the <em>measures</em> object, e.g.,</p>

<pre><code>var measures = { temperature: { symbol: 'C', units: 'celsius', type: 'derivedSI' }
                 ...
               };
</code></pre>

<p>Add to this object as appropriate.
The valid values for the <em>type</em> field are:</p>

<ul>
<li><p><em>baseSI</em> - one of the seven <a href="http://en.wikipedia.org/wiki/SI_base_unit">SI base units</a>;</p></li>
<li><p><em>derivedSI</em> - formed by the juxtaposition of <a href="http://en.wikipedia.org/wiki/SI_derived_unit">two or more base units</a>;</p></li>
<li><p><em>derivedUnits</em> - a unit derived not derived from the SI, but <a href="http://en.wikipedia.org/wiki/Non-SI_units_mentioned_in_the_SI">frequently used in conjunction with the SI</a>; and,</p></li>
<li><p><em>contextDependentUnits</em> - anything else.</p></li>
</ul>

<p>Now let's look at the ten categories of devices.</p>

<h3>Climate</h3>

<p>These are devices that monitor or control the "breathable environment".
The naming pattern is:</p>

<pre><code>/device/climate/XYZ/QUALITY
</code></pre>

<p>depending on whether control functions are available.</p>

<p>At a minimum, two properties must be present:</p>

<ul>
<li><p><em>lastSample</em> - a timestamp</p></li>
<li><p><em>temperature</em> - in degrees centigrade (celsius)</p></li>
</ul>

<p>In addition, depending on the capabilities of the device, additional properties may be present:</p>

<ul>
<li><p><em>humidity</em> - a percentage</p></li>
<li><p><em>co2</em> - in parts-per-million</p></li>
<li><p><em>noise</em> - in decibels</p></li>
<li><p><em>pressure</em> - in millibars</p></li>
<li><p><em>airQuality</em> - in sigmas</p></li>
<li><p><em>smoke</em> - in sigmas</p></li>
<li><p><em>co</em> - in sigmas</p></li>
<li><p><em>no2</em> - in sigmas</p></li>
<li><p><em>hcho</em> - in sigmas</p></li>
<li><p><em>needs*</em> - <em>true</em> or <em>false</em></p></li>
<li><p><em>advise*</em> - a string (e.g., "front yard")</p></li>
</ul>

<p>Please note that the <em>updated</em> and <em>lastSample</em> properties report different things:
<em>lastSample</em> indicates when the climate properties where last measured,
whilst <em>updated</em> indicates the last change in state for the device
(i.e., it is possible for <em>updated</em> to change regardless of whether <em>lastSample</em> changes;
however, whenever <em>lastSample</em> changes to reflect a more recent measurement,
<em>updated</em> will also change to the current time).</p>

<p>Finally, control devices may have additional properties:</p>

<p><em>away</em> - either <em>off</em> or <em>on</em></p>

<p><em>hvac</em> - either <em>off</em>, <em>cool</em>, <em>heat</em>, or <em>fan</em></p>

<p><em>fan</em> - either <em>on</em>, <em>auto</em>, or the number of milliseconds that it should run</p>

<p><em>goalTemperature</em> - the desired temperature</p>

<p><em>leaf</em> - either <em>off</em> or <em>on</em></p>

<h3>Gateway</h3>

<p>These are devices that interface to non-IP devices,
or devices that talk to a cloud-based service to get information about a device in the home.
Accordingly, there are two naming patterns, i.e.,</p>

<pre><code>/device/gateway/TECHNOLOGY/MODEL
/device/gateway/TECHNOLOGY/cloud
</code></pre>

<p>For example:</p>

<pre><code>/device/gateway/insteon/hub
/device/gateway/netatmo/cloud
</code></pre>

<p>The <em>status</em> property may be the only property present:</p>

<ul>
<li><em>status</em> - <em>waiting</em>, <em>ready</em>, <em>error</em>, or <em>reset</em></li>
</ul>

<p>Note that gateways to cloud-based services require authentication information,
which is typically set using either the</p>

<pre><code>/manage/api/v1/device/create/uuid
</code></pre>

<p>or</p>

<pre><code>/manage/api/v1/device/perform/id
</code></pre>

<p>APIs.</p>

<h3>Indicator</h3>

<p>These are devices that provide an indication to the user that is related to neither the "lighting environment" or the
"media environment".
The naming pattern is:</p>

<pre><code>/dev/indicator/XYZ/MEDIA
</code></pre>

<p>where MEDIA is usually <em>text</em>.</p>

<p>The <em>status</em> property may be the only property present:</p>

<ul>
<li><em>status</em> - <em>waiting</em>, <em>ready</em>, or <em>error</em></li>
</ul>

<p>As with gateway devices for cloud-based services,
once initialized,
these devices are almost entirely uninteresting to the user.</p>

<h3>Lighting</h3>

<p>These are devices that control the "lighting environment".
The naming pattern is:</p>

<pre><code>/device/lighting/XYZ/bulb
/device/lighting/XYZ/cfl
/device/lighting/XYZ/downlight
/device/lighting/XYZ/led
/device/lighting/XYZ/lightstrip
/device/lighting/XYZ/uplight
</code></pre>

<p>Given the range of physical properties,
it is challenging to provide an abstraction which preserves the fidelity of the device-specific color model.</p>

<p>The <em>status</em> property indicates the current state of the bulb:</p>

<ul>
<li><em>status</em> - <em>waiting</em>,  <em>on</em>, or <em>off</em></li>
</ul>

<p>At a minimum, two tasks must be available:</p>

<ul>
<li><p><em>on</em> - turns the light on</p></li>
<li><p><em>off</em> - turns the light off</p></li>
</ul>

<p>Any of these properties may be present, which are set with the <em>on</em> task:</p>

<ul>
<li><p><em>color.model</em> - defines the model and parameters, any combination of:</p>

<ul>
<li><p><em>color.rgb</em> - with parameters <em>r</em>, <em>g</em>, and <em>b</em>, each a integer-value between 0 and 255</p></li>
<li><p><em>color.rgb16</em> - with parameters <em>r</em>, <em>g</em>, and <em>b</em>, each a integer-value between 0 and 65535</p></li>
<li><p><em>color.rgbow</em> - with parameters <em>r</em>, <em>g</em>, <em>b</em>, <em>o</em>, and <em>w</em>, each a integer-value between 0 and 255</p></li>
<li><p><em>color.hue</em> - with parameters <em>hue</em> (in degrees) and <em>saturation</em> (as a percentage)</p></li>
<li><p><em>color.temperature</em> - with parameter <em>temperature</em> expressed in mireds</p></li>
<li><p><em>color.cie1931</em> - with parameters <em>x</em> and <em>y</em> expressed as a real-value between 0 and 1</p></li>
</ul></li>
</ul>

<p>With respect to the color model,
the list above is presented starting at the least-desirable (<em>rgb</em>) to the most-desirable (<em>cie1931</em>).
Clueful clients that manage the lighting environment should take note of which models are supported by a device and use the
most desirable.</p>

<p>In addition, there are some optional properties:</p>

<ul>
<li><p><em>brightness</em> - an integer-value percentage of the bulb's possible output</p></li>
<li><p><em>color.fixed</em> - <em>true</em> or <em>false</em> (if true, the color may not be changed)</p></li>
<li><p><em>pps</em> - <em>u16</em> the number of pixels in a pixel strip</p></li>
</ul>

<h3>Media</h3>

<p>These are devices that control the "media environment".
The naming pattern is:</p>

<pre><code>/device/media/XYZ/audio
/device/media/XYZ/netcam
/device/media/XYZ/video
</code></pre>

<p>At a minimum, these properties must be present:</p>

<ul>
<li><p><em>status</em> - one of <em>idle</em>, <em>playing</em>, <em>paused</em>, or <em>busy</em></p></li>
<li><p><em>track</em> - defines the track information:</p>

<ul>
<li><p><em>title</em>, <em>artist</em>, and <em>album</em> - strings</p></li>
<li><p><em>albumArtURI</em> - a URI</p></li>
</ul></li>
<li><p><em>position</em> - an integer-value indicating the number of milliseconds</p></li>
<li><p><em>volume</em> - an integer-value percentage of the device's possible output</p></li>
<li><p><em>muted</em> - either <em>on</em> or <em>off</em></p></li>
</ul>

<p>At a minimum, these tasks must be available:</p>

<ul>
<li><p><em>play</em> - plays the <em>url</em> parameter (or resumes playback if the <em>url</em> isn't present)</p></li>
<li><p><em>stop</em> - stops playback</p></li>
<li><p><em>pause</em> - pauses playback</p></li>
<li><p><em>seek</em> - to the <em>position</em> parameter</p></li>
<li><p><em>set</em> - set any of these parameters: <em>position</em>, <em>volume</em>, and/or <em>muted</em></p></li>
</ul>

<h3>Motive</h3>

<p>These are devices that have some movement capability: either rotational or mobile.
The naming pattern is:</p>

<pre><code>/device/motive/XYZ/2d
/device/motive/XYZ/3d
/device/motive/XYZ/ptz
/device/motive/XYZ/automobile
</code></pre>

<p><em>under review</em></p>

<h3>Presence</h3>

<p>These are devices that report presence.
The naming pattern is:</p>

<pre><code>/device/presence/XYZ/fob
/device/presence/XYZ/mobile
</code></pre>

<p>At a minimum, two properties must be present:</p>

<ul>
<li><p><em>status</em></p>

<ul>
<li><p><em>present</em> - the device is currently detected</p></li>
<li><p><em>absent</em> - the device is no longer detected</p></li>
<li><p><em>recent</em> - the device was recently detected (to save device power, the steward does not continuously probe the device)</p></li>
</ul></li>
<li><p><em>lqi</em> - an integer-value between -127 and 128 indicating proximity (higher is closer)</p></li>
</ul>

<p>At a minimum, one task must be present:</p>

<ul>
<li><p><em>alert</em> - causes the presence device to emit a visual and/or audio signal</p>

<ul>
<li><em>level</em> parameter: one of <em>none</em>, <em>mild</em>, or <em>high</em></li>
</ul></li>
</ul>

<h3>Sensor</h3>

<p>These are devices that measure one physical quality (such as motion).
The naming pattern is:</p>

<pre><code>/device/sensor/XYZ/QUALITY
</code></pre>

<p>At a minimum, one property must be present:</p>

<ul>
<li><em>lastSample</em> - a timestamp</li>
</ul>

<h3>Switch</h3>

<p>These are devices that control power either in binary (<em>onoff</em>), contiguously (<em>dimmer</em>), or as a group (<em>strip</em>).
In addition, this category also includes devices that monitor power (<em>meter</em>).
The naming pattern is:</p>

<pre><code>/device/switch/XYZ/dimmer
/device/switch/XYZ/meter
/device/switch/XYZ/onoff
/device/switch/XYZ/strip
</code></pre>

<p>The <em>status</em> property may be the only property present:</p>

<ul>
<li><em>status</em> - <em>on</em>, <em>off</em>, <em>busy</em>, or <em>waiting</em></li>
</ul>

<p>For devices that control power,
at a minimum,
two tasks must be available:</p>

<ul>
<li><p><em>on</em> - turns the power on</p>

<ul>
<li><em>level</em> (<em>dimmer</em> only) - an integer-value percentage of the switch's possible output</li>
</ul></li>
<li><p><em>off</em> - turns the power off</p></li>
</ul>

<h3>Wearable</h3>

<p>These are devices that are similar to fob devices, but meant to be more personal.
The naming pattern is:</p>

<pre><code>/device/wearable/XYZ/watch
</code></pre>

<p>Please consult the section on <em>Presence</em> devices for further details.
(In the future, it is likely that this device prototype will have additional features.)</p>

</div>


<div class="footer">
	<div class="footer-left"><a href="../index.html" class="green">&uarr;</a> <a href="../index.html" class="yellow">the thing system</a></div>
	<div class="footer-right"><a href="../code/index.html" class="select-orange">Get The Code</a></div>
</div>

<div class="pulldown styled-select" style="background-color: #f05687;">
<form method="get" action="http://thethingsystem.com/">
<select name="primary" onchange="parent.location=(this.options[this.selectedIndex].value)">
  <option value="../index.html">Select an Option</option>
  <option value="../things/index.html">The Trouble With Things</option>
  <option value="../dev/index.html">For Implementors</option>
  <option value="selected">Documentation</option>
  <option value="../dev/supported-things.html">Supported Things</option>
  <option value="../code/index.html">Get The Code</option>
  <option value="../index.html">&#x24E3;</option>
</select> 
</form>
</div>
</div>

</body>
</html>
